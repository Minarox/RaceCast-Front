---
import { SEO } from "astro-seo"
import { AstroFont } from "astro-font"
import Logo from "@assets/logo.svg"
import Loader from "@components/Loader.astro"
import LiveKit from "@components/LiveKit.astro"
import AudioTrigger from "@components/AudioTrigger.astro"
import Banner from "@assets/banner.webp"

const title: string = "RaceCast"
const description: string = "Diffusion en direct de la voiture de course de Kevin CORBIER."
const audio = Astro.props.audio || false
---

<!doctype html>
<html lang="fr">
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">

		<SEO
			title={title}
			description={description}
			charset="UTF-8"
			openGraph={{
				basic: {
					title,
					type: "website",
					url: Astro.url.origin,
					image: Banner.src
				},
				optional: {
					locale: "fr_FR",
				},
				image: {
					alt: `${title} banner`,
					url: Banner.src,
					type: "image/webp"
				}
			}}
			twitter={{
				creator: "@Minarox_",
				card: "summary_large_image",
				site: Astro.url.origin,
				title,
				description: description,
				image: Banner.src,
				imageAlt: `${title} banner`,
			}}
			extend={{
				link: [
					{ rel: "icon", type: "image/svg+xml", href: Logo.src },
					{ rel: "sitemap", href: "/sitemap-index.xml" },
				],
				meta: [
					{ name: "viewport", content: "width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" },
					{ name: "theme-color", content: "#242424" },
					{ name: "keywords", content: "Stream, Rallye, Direct, Compétition, Kévin, Corbier, Voiture, Course, RaceCast, Race, Classement, Spéciale" },
					{ name: "robots", content: "index, follow" },
					{ name: "language", content: "French" },
					{ name: "author", content: "Mathis Serrieres Maniecki" }
				]
			}}
		/>

		<AstroFont
			config={[
				{
					name: "Inter",
					src: [],
					googleFontsURL: "https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap",
					preload: true,
					fetch: true,
					verbose: true,
					cacheDir: ".astro/fonts",
					display: "swap",
					selector: "body",
					fallback: "sans-serif"
				}
			]}
		/>
	</head>

	<body>
		<slot />
		<LiveKit />
		{audio && <AudioTrigger />}
		<Loader />
	</body>
</html>

<style is:global>
	* {
		box-sizing: border-box;
		margin: 0;
		padding: 0;
	}

	html {
		font-family: "Inter", Helvetica, Arial, sans-serif;
		-webkit-font-smoothing: antialiased;
		font-synthesis: none;
		font-optical-sizing: auto;
		font-style: normal;
		font-weight: 400;
		font-size: 1em;
		-moz-osx-font-smoothing: grayscale;
		text-rendering: optimizeLegibility;
		-webkit-text-size-adjust: 100%;
		background-color: #242424;
		color: white;
	}

	body {
		width: 100vw;
        height: 100vh;
	}

	.box {
		padding: 16px;
        background-color: #DDDDDD;
        color: black;
	}

	.hidden {
        display: none !important;
    }

	.hide {
		opacity: 0 !important;
		user-select: none !important;
		pointer-events: none !important;
	}
</style>
